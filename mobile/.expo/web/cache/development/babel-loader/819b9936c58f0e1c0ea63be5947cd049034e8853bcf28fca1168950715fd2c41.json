{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { QueryClient } from '@tanstack/react-query';\nexport var queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      retry: 1,\n      refetchOnWindowFocus: false,\n      staleTime: 5 * 60 * 1000\n    }\n  }\n});\nexport function getQueryFn() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return function () {\n    var _ref2 = _asyncToGenerator(function* (_ref) {\n      var queryKey = _ref.queryKey;\n      var url = String(queryKey[0]);\n      try {\n        var res = yield fetch(url);\n        if (!res.ok) {\n          if (res.status === 401 && options.on401 === 'returnNull') {\n            return null;\n          }\n          if (res.status === 404 && options.on404 === 'returnNull') {\n            return null;\n          }\n          var errorText = yield res.text();\n          throw new Error(errorText || `API error ${res.status}`);\n        }\n        var contentType = res.headers.get('content-type');\n        if (contentType && contentType.includes('application/json')) {\n          return res.json();\n        }\n        return null;\n      } catch (error) {\n        console.error('API Request failed:', error);\n        throw error;\n      }\n    });\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n}\nexport function apiRequest(_x2, _x3, _x4) {\n  return _apiRequest.apply(this, arguments);\n}\nfunction _apiRequest() {\n  _apiRequest = _asyncToGenerator(function* (method, url, data) {\n    var options = {\n      method: method,\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      credentials: 'include'\n    };\n    if (data) {\n      options.body = JSON.stringify(data);\n    }\n    try {\n      var response = yield fetch(url, options);\n      return response;\n    } catch (error) {\n      console.error('API Request failed:', error);\n      throw error;\n    }\n  });\n  return _apiRequest.apply(this, arguments);\n}","map":{"version":3,"names":["QueryClient","queryClient","defaultOptions","queries","retry","refetchOnWindowFocus","staleTime","getQueryFn","options","arguments","length","undefined","_ref2","_asyncToGenerator","_ref","queryKey","url","String","res","fetch","ok","status","on401","on404","errorText","text","Error","contentType","headers","get","includes","json","error","console","_x","apply","apiRequest","_x2","_x3","_x4","_apiRequest","method","data","credentials","body","JSON","stringify","response"],"sources":["/home/runner/workspace/mobile/src/api/queryClient.ts"],"sourcesContent":["import { QueryClient } from '@tanstack/react-query';\n\n// Initialize QueryClient\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      retry: 1,\n      refetchOnWindowFocus: false,\n      staleTime: 5 * 60 * 1000, // 5 minutes\n    },\n  },\n});\n\n// Interface for QueryFn options\ninterface GetQueryFnOptions {\n  on401?: 'throw' | 'returnNull';\n  on404?: 'throw' | 'returnNull';\n}\n\n// Default fetcher with error handling options\nexport function getQueryFn(options: GetQueryFnOptions = {}) {\n  return async ({ queryKey }: { queryKey: readonly unknown[] }): Promise<any> => {\n    const url = String(queryKey[0]);\n    \n    try {\n      const res = await fetch(url);\n\n      if (!res.ok) {\n        if (res.status === 401 && options.on401 === 'returnNull') {\n          return null;\n        }\n        if (res.status === 404 && options.on404 === 'returnNull') {\n          return null;\n        }\n        \n        const errorText = await res.text();\n        throw new Error(errorText || `API error ${res.status}`);\n      }\n\n      // For non-JSON responses like empty responses\n      const contentType = res.headers.get('content-type');\n      if (contentType && contentType.includes('application/json')) {\n        return res.json();\n      }\n\n      return null;\n    } catch (error) {\n      console.error('API Request failed:', error);\n      throw error;\n    }\n  };\n}\n\n// Function for making API requests\nexport async function apiRequest(\n  method: 'GET' | 'POST' | 'PATCH' | 'DELETE', \n  url: string, \n  data?: any\n): Promise<Response> {\n  const options: RequestInit = {\n    method,\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    credentials: 'include',\n  };\n\n  if (data) {\n    options.body = JSON.stringify(data);\n  }\n\n  try {\n    const response = await fetch(url, options);\n    return response;\n  } catch (error) {\n    console.error('API Request failed:', error);\n    throw error;\n  }\n}"],"mappings":";AAAA,SAASA,WAAW,QAAQ,uBAAuB;AAGnD,OAAO,IAAMC,WAAW,GAAG,IAAID,WAAW,CAAC;EACzCE,cAAc,EAAE;IACdC,OAAO,EAAE;MACPC,KAAK,EAAE,CAAC;MACRC,oBAAoB,EAAE,KAAK;MAC3BC,SAAS,EAAE,CAAC,GAAG,EAAE,GAAG;IACtB;EACF;AACF,CAAC,CAAC;AASF,OAAO,SAASC,UAAUA,CAAA,EAAkC;EAAA,IAAjCC,OAA0B,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EACxD;IAAA,IAAAG,KAAA,GAAAC,iBAAA,CAAO,WAAAC,IAAA,EAAwE;MAAA,IAA/DC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;MACtB,IAAMC,GAAG,GAAGC,MAAM,CAACF,QAAQ,CAAC,CAAC,CAAC,CAAC;MAE/B,IAAI;QACF,IAAMG,GAAG,SAASC,KAAK,CAACH,GAAG,CAAC;QAE5B,IAAI,CAACE,GAAG,CAACE,EAAE,EAAE;UACX,IAAIF,GAAG,CAACG,MAAM,KAAK,GAAG,IAAIb,OAAO,CAACc,KAAK,KAAK,YAAY,EAAE;YACxD,OAAO,IAAI;UACb;UACA,IAAIJ,GAAG,CAACG,MAAM,KAAK,GAAG,IAAIb,OAAO,CAACe,KAAK,KAAK,YAAY,EAAE;YACxD,OAAO,IAAI;UACb;UAEA,IAAMC,SAAS,SAASN,GAAG,CAACO,IAAI,CAAC,CAAC;UAClC,MAAM,IAAIC,KAAK,CAACF,SAAS,IAAI,aAAaN,GAAG,CAACG,MAAM,EAAE,CAAC;QACzD;QAGA,IAAMM,WAAW,GAAGT,GAAG,CAACU,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;QACnD,IAAIF,WAAW,IAAIA,WAAW,CAACG,QAAQ,CAAC,kBAAkB,CAAC,EAAE;UAC3D,OAAOZ,GAAG,CAACa,IAAI,CAAC,CAAC;QACnB;QAEA,OAAO,IAAI;MACb,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;QAC3C,MAAMA,KAAK;MACb;IACF,CAAC;IAAA,iBAAAE,EAAA;MAAA,OAAAtB,KAAA,CAAAuB,KAAA,OAAA1B,SAAA;IAAA;EAAA;AACH;AAGA,gBAAsB2B,UAAUA,CAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA;EAAA,OAAAC,WAAA,CAAAL,KAAA,OAAA1B,SAAA;AAAA;AAwB/B,SAAA+B,YAAA;EAAAA,WAAA,GAAA3B,iBAAA,CAxBM,WACL4B,MAA2C,EAC3CzB,GAAW,EACX0B,IAAU,EACS;IACnB,IAAMlC,OAAoB,GAAG;MAC3BiC,MAAM,EAANA,MAAM;MACNb,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDe,WAAW,EAAE;IACf,CAAC;IAED,IAAID,IAAI,EAAE;MACRlC,OAAO,CAACoC,IAAI,GAAGC,IAAI,CAACC,SAAS,CAACJ,IAAI,CAAC;IACrC;IAEA,IAAI;MACF,IAAMK,QAAQ,SAAS5B,KAAK,CAACH,GAAG,EAAER,OAAO,CAAC;MAC1C,OAAOuC,QAAQ;IACjB,CAAC,CAAC,OAAOf,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC3C,MAAMA,KAAK;IACb;EACF,CAAC;EAAA,OAAAQ,WAAA,CAAAL,KAAA,OAAA1B,SAAA;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}