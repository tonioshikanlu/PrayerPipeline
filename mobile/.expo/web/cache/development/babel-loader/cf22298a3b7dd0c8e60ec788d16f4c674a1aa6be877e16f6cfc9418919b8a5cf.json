{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/runner/workspace/mobile/src/context/AuthContext.tsx\",\n  _this = this;\nimport React, { createContext, useState, useEffect } from 'react';\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport * as SecureStore from \"../mocks/expo-secure-store\";\nimport { apiRequest } from \"../api/queryClient\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var AuthContext = createContext({});\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isLoading = _useState4[0],\n    setIsLoading = _useState4[1];\n  useEffect(function () {\n    var loadUser = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        try {\n          var storedUser = yield SecureStore.getItemAsync('user');\n          var storedToken = yield SecureStore.getItemAsync('token');\n          if (storedUser && storedToken) {\n            setUser(JSON.parse(storedUser));\n          }\n        } catch (error) {\n          console.error('Error loading auth state:', error);\n        } finally {\n          setIsLoading(false);\n        }\n      });\n      return function loadUser() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    loadUser();\n  }, []);\n  var signIn = function () {\n    var _ref3 = _asyncToGenerator(function* (username, password) {\n      setIsLoading(true);\n      try {\n        var response = yield apiRequest('POST', '/api/login', {\n          username: username,\n          password: password\n        });\n        if (!response.ok) {\n          var errorData = yield response.json().catch(function () {\n            return {};\n          });\n          Alert.alert('Error', errorData.message || 'Invalid credentials');\n          return false;\n        }\n        var userData = yield response.json();\n        yield SecureStore.setItemAsync('user', JSON.stringify(userData));\n        setUser(userData);\n        return true;\n      } catch (error) {\n        console.error('Login error:', error);\n        Alert.alert('Error', 'Failed to sign in. Please try again.');\n        return false;\n      } finally {\n        setIsLoading(false);\n      }\n    });\n    return function signIn(_x, _x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var signUp = function () {\n    var _ref4 = _asyncToGenerator(function* (name, email, username, password) {\n      setIsLoading(true);\n      try {\n        if (!name || !email || !username || password.length < 6) {\n          Alert.alert('Error', 'Please fill all fields. Password must be at least 6 characters.');\n          return false;\n        }\n        var response = yield apiRequest('POST', '/api/register', {\n          name: name,\n          email: email,\n          username: username,\n          password: password\n        });\n        if (!response.ok) {\n          var errorData = yield response.json().catch(function () {\n            return {};\n          });\n          Alert.alert('Error', errorData.message || 'Registration failed');\n          return false;\n        }\n        var userData = yield response.json();\n        yield SecureStore.setItemAsync('user', JSON.stringify(userData));\n        setUser(userData);\n        return true;\n      } catch (error) {\n        console.error('Registration error:', error);\n        Alert.alert('Error', 'Failed to create account. Please try again.');\n        return false;\n      } finally {\n        setIsLoading(false);\n      }\n    });\n    return function signUp(_x3, _x4, _x5, _x6) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var signOut = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      try {\n        var response = yield apiRequest('POST', '/api/logout');\n        yield SecureStore.deleteItemAsync('user');\n        yield SecureStore.deleteItemAsync('token');\n        setUser(null);\n        if (!response.ok) {\n          console.warn('Logout API call failed, but local state was cleared');\n        }\n      } catch (error) {\n        console.error('Logout error:', error);\n        yield SecureStore.deleteItemAsync('user');\n        yield SecureStore.deleteItemAsync('token');\n        setUser(null);\n        Alert.alert('Warning', 'There was an issue signing out from the server, but you have been logged out locally.');\n      }\n    });\n    return function signOut() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var forgotPassword = function () {\n    var _ref6 = _asyncToGenerator(function* (email) {\n      setIsLoading(true);\n      try {\n        yield new Promise(function (resolve) {\n          return setTimeout(resolve, 1000);\n        });\n        Alert.alert('Success', 'If an account exists with that email, a password reset link has been sent.');\n        return true;\n      } catch (error) {\n        console.error('Forgot password error:', error);\n        Alert.alert('Error', 'Failed to process request. Please try again.');\n        return false;\n      } finally {\n        setIsLoading(false);\n      }\n    });\n    return function forgotPassword(_x7) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  var resetPassword = function () {\n    var _ref7 = _asyncToGenerator(function* (token, newPassword) {\n      setIsLoading(true);\n      try {\n        yield new Promise(function (resolve) {\n          return setTimeout(resolve, 1000);\n        });\n        if (newPassword.length < 6) {\n          Alert.alert('Error', 'Password must be at least 6 characters.');\n          return false;\n        }\n        Alert.alert('Success', 'Your password has been reset successfully.');\n        return true;\n      } catch (error) {\n        console.error('Reset password error:', error);\n        Alert.alert('Error', 'Failed to reset password. Please try again.');\n        return false;\n      } finally {\n        setIsLoading(false);\n      }\n    });\n    return function resetPassword(_x8, _x9) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n  var updateProfile = function () {\n    var _ref8 = _asyncToGenerator(function* (data) {\n      setIsLoading(true);\n      try {\n        if (!user) {\n          Alert.alert('Error', 'You must be logged in to update your profile.');\n          return false;\n        }\n        var response = yield apiRequest('PATCH', '/api/user/profile', data);\n        if (!response.ok) {\n          var errorData = yield response.json().catch(function () {\n            return {};\n          });\n          Alert.alert('Error', errorData.message || 'Failed to update profile');\n          return false;\n        }\n        yield refreshUser();\n        Alert.alert('Success', 'Profile updated successfully.');\n        return true;\n      } catch (error) {\n        console.error('Update profile error:', error);\n        Alert.alert('Error', 'Failed to update profile. Please try again.');\n        return false;\n      } finally {\n        setIsLoading(false);\n      }\n    });\n    return function updateProfile(_x10) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n  var changePassword = function () {\n    var _ref9 = _asyncToGenerator(function* (currentPassword, newPassword) {\n      setIsLoading(true);\n      try {\n        if (newPassword.length < 6) {\n          Alert.alert('Error', 'New password must be at least 6 characters.');\n          return false;\n        }\n        var response = yield apiRequest('POST', '/api/user/password', {\n          currentPassword: currentPassword,\n          newPassword: newPassword\n        });\n        if (!response.ok) {\n          var errorData = yield response.json().catch(function () {\n            return {};\n          });\n          Alert.alert('Error', errorData.message || 'Failed to change password');\n          return false;\n        }\n        Alert.alert('Success', 'Password changed successfully.');\n        return true;\n      } catch (error) {\n        console.error('Change password error:', error);\n        Alert.alert('Error', 'Failed to change password. Please try again.');\n        return false;\n      } finally {\n        setIsLoading(false);\n      }\n    });\n    return function changePassword(_x11, _x12) {\n      return _ref9.apply(this, arguments);\n    };\n  }();\n  var refreshUser = function () {\n    var _ref10 = _asyncToGenerator(function* () {\n      try {\n        setIsLoading(true);\n        var response = yield apiRequest('GET', '/api/user');\n        if (!response.ok) {\n          if (response.status === 401) {\n            yield SecureStore.deleteItemAsync('user');\n            yield SecureStore.deleteItemAsync('token');\n            setUser(null);\n            return;\n          }\n          throw new Error('Failed to fetch user data');\n        }\n        var userData = yield response.json();\n        yield SecureStore.setItemAsync('user', JSON.stringify(userData));\n        setUser(userData);\n      } catch (error) {\n        console.error('Refresh user error:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    });\n    return function refreshUser() {\n      return _ref10.apply(this, arguments);\n    };\n  }();\n  return _jsxDEV(AuthContext.Provider, {\n    value: {\n      user: user,\n      isLoading: isLoading,\n      signIn: signIn,\n      signUp: signUp,\n      signOut: signOut,\n      forgotPassword: forgotPassword,\n      resetPassword: resetPassword,\n      updateProfile: updateProfile,\n      changePassword: changePassword,\n      refreshUser: refreshUser\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 289,\n    columnNumber: 5\n  }, _this);\n};","map":{"version":3,"names":["React","createContext","useState","useEffect","Alert","SecureStore","apiRequest","jsxDEV","_jsxDEV","AuthContext","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","isLoading","setIsLoading","loadUser","_ref2","_asyncToGenerator","storedUser","getItemAsync","storedToken","JSON","parse","error","console","apply","arguments","signIn","_ref3","username","password","response","ok","errorData","json","catch","alert","message","userData","setItemAsync","stringify","_x","_x2","signUp","_ref4","name","email","length","_x3","_x4","_x5","_x6","signOut","_ref5","deleteItemAsync","warn","forgotPassword","_ref6","Promise","resolve","setTimeout","_x7","resetPassword","_ref7","token","newPassword","_x8","_x9","updateProfile","_ref8","data","refreshUser","_x10","changePassword","_ref9","currentPassword","_x11","_x12","_ref10","status","Error","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_this"],"sources":["/home/runner/workspace/mobile/src/context/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\nimport { Alert } from 'react-native';\nimport * as SecureStore from '../mocks/expo-secure-store';\nimport { apiRequest } from '../api/queryClient';\n\ninterface User {\n  id: number;\n  username: string;\n  email: string;\n  name: string;\n  organizations?: { id: number; name: string }[];\n}\n\ninterface AuthContextData {\n  user: User | null;\n  isLoading: boolean;\n  signIn: (username: string, password: string) => Promise<boolean>;\n  signUp: (name: string, email: string, username: string, password: string) => Promise<boolean>;\n  signOut: () => Promise<void>;\n  forgotPassword: (email: string) => Promise<boolean>;\n  resetPassword: (token: string, newPassword: string) => Promise<boolean>;\n  updateProfile: (data: Partial<User>) => Promise<boolean>;\n  changePassword: (currentPassword: string, newPassword: string) => Promise<boolean>;\n  refreshUser: () => Promise<void>;\n}\n\nexport const AuthContext = createContext<AuthContextData>({} as AuthContextData);\n\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    // Load user from secure storage on app start\n    const loadUser = async () => {\n      try {\n        const storedUser = await SecureStore.getItemAsync('user');\n        const storedToken = await SecureStore.getItemAsync('token');\n        \n        if (storedUser && storedToken) {\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth state:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadUser();\n  }, []);\n\n  const signIn = async (username: string, password: string): Promise<boolean> => {\n    setIsLoading(true);\n    try {\n      const response = await apiRequest('POST', '/api/login', { username, password });\n      \n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        Alert.alert('Error', errorData.message || 'Invalid credentials');\n        return false;\n      }\n      \n      const userData = await response.json();\n      \n      // Store in secure storage\n      await SecureStore.setItemAsync('user', JSON.stringify(userData));\n      // We don't need to store a token as we're using cookies\n      \n      setUser(userData);\n      return true;\n    } catch (error) {\n      console.error('Login error:', error);\n      Alert.alert('Error', 'Failed to sign in. Please try again.');\n      return false;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const signUp = async (\n    name: string,\n    email: string,\n    username: string,\n    password: string\n  ): Promise<boolean> => {\n    setIsLoading(true);\n    try {\n      // Validate input\n      if (!name || !email || !username || password.length < 6) {\n        Alert.alert('Error', 'Please fill all fields. Password must be at least 6 characters.');\n        return false;\n      }\n      \n      const response = await apiRequest('POST', '/api/register', {\n        name,\n        email,\n        username,\n        password\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        Alert.alert('Error', errorData.message || 'Registration failed');\n        return false;\n      }\n      \n      const userData = await response.json();\n      \n      // Store in secure storage\n      await SecureStore.setItemAsync('user', JSON.stringify(userData));\n      // We don't need to store a token as we're using cookies\n      \n      setUser(userData);\n      return true;\n    } catch (error) {\n      console.error('Registration error:', error);\n      Alert.alert('Error', 'Failed to create account. Please try again.');\n      return false;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const signOut = async (): Promise<void> => {\n    try {\n      // Call the logout API endpoint\n      const response = await apiRequest('POST', '/api/logout');\n      \n      // Even if the API call fails, we should clean up local data\n      await SecureStore.deleteItemAsync('user');\n      await SecureStore.deleteItemAsync('token');\n      \n      setUser(null);\n      \n      if (!response.ok) {\n        console.warn('Logout API call failed, but local state was cleared');\n      }\n    } catch (error) {\n      console.error('Logout error:', error);\n      // Still clear local data even if API call fails\n      await SecureStore.deleteItemAsync('user');\n      await SecureStore.deleteItemAsync('token');\n      setUser(null);\n      \n      Alert.alert('Warning', 'There was an issue signing out from the server, but you have been logged out locally.');\n    }\n  };\n\n  const forgotPassword = async (email: string): Promise<boolean> => {\n    setIsLoading(true);\n    try {\n      // Simulate API call with a delay\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // Always return success for demo\n      Alert.alert('Success', 'If an account exists with that email, a password reset link has been sent.');\n      return true;\n    } catch (error) {\n      console.error('Forgot password error:', error);\n      Alert.alert('Error', 'Failed to process request. Please try again.');\n      return false;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const resetPassword = async (token: string, newPassword: string): Promise<boolean> => {\n    setIsLoading(true);\n    try {\n      // Simulate API call with a delay\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // Validate password\n      if (newPassword.length < 6) {\n        Alert.alert('Error', 'Password must be at least 6 characters.');\n        return false;\n      }\n      \n      // Always return success for demo\n      Alert.alert('Success', 'Your password has been reset successfully.');\n      return true;\n    } catch (error) {\n      console.error('Reset password error:', error);\n      Alert.alert('Error', 'Failed to reset password. Please try again.');\n      return false;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const updateProfile = async (data: Partial<User>): Promise<boolean> => {\n    setIsLoading(true);\n    try {\n      if (!user) {\n        Alert.alert('Error', 'You must be logged in to update your profile.');\n        return false;\n      }\n      \n      // We'll use the /api/user/profile endpoint (assumed to exist)\n      // If such endpoint doesn't exist, we would need to create it on the backend\n      const response = await apiRequest('PATCH', '/api/user/profile', data);\n      \n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        Alert.alert('Error', errorData.message || 'Failed to update profile');\n        return false;\n      }\n      \n      // Get updated user data\n      await refreshUser();\n      \n      Alert.alert('Success', 'Profile updated successfully.');\n      return true;\n    } catch (error) {\n      console.error('Update profile error:', error);\n      Alert.alert('Error', 'Failed to update profile. Please try again.');\n      return false;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const changePassword = async (currentPassword: string, newPassword: string): Promise<boolean> => {\n    setIsLoading(true);\n    try {\n      // Validate password\n      if (newPassword.length < 6) {\n        Alert.alert('Error', 'New password must be at least 6 characters.');\n        return false;\n      }\n      \n      // We'll use the /api/user/password endpoint (assumed to exist)\n      // If such endpoint doesn't exist, we would need to create it on the backend\n      const response = await apiRequest('POST', '/api/user/password', {\n        currentPassword,\n        newPassword\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        Alert.alert('Error', errorData.message || 'Failed to change password');\n        return false;\n      }\n      \n      Alert.alert('Success', 'Password changed successfully.');\n      return true;\n    } catch (error) {\n      console.error('Change password error:', error);\n      Alert.alert('Error', 'Failed to change password. Please try again.');\n      return false;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const refreshUser = async (): Promise<void> => {\n    try {\n      setIsLoading(true);\n      \n      // Fetch current user data from API\n      const response = await apiRequest('GET', '/api/user');\n      \n      if (!response.ok) {\n        // If unauthorized, clear local user data\n        if (response.status === 401) {\n          await SecureStore.deleteItemAsync('user');\n          await SecureStore.deleteItemAsync('token');\n          setUser(null);\n          return;\n        }\n        throw new Error('Failed to fetch user data');\n      }\n      \n      const userData = await response.json();\n      \n      // Store updated user in secure storage\n      await SecureStore.setItemAsync('user', JSON.stringify(userData));\n      \n      setUser(userData);\n    } catch (error) {\n      console.error('Refresh user error:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        isLoading,\n        signIn,\n        signUp,\n        signOut,\n        forgotPassword,\n        resetPassword,\n        updateProfile,\n        changePassword,\n        refreshUser,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}